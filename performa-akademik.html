<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Profil Performa Akademik • Kuesioner (Quiz)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Inter',sans-serif;background:#f3f4f6}
    .question-nav-item{width:32px;height:32px;display:flex;justify-content:center;align-items:center;border-radius:50%;background:#e5e7eb;color:#4b5563;cursor:pointer;transition:.2s;font-weight:600}
    .question-nav-item.active{outline:2px solid #1e88e5; outline-offset:2px}
    .question-nav-item.correct{background:#16a34a;color:#fff}
    .question-nav-item.wrong{background:#dc2626;color:#fff}
    .nav-button{background:#1e88e5;color:#fff;font-weight:600;padding:.75rem 2rem;border-radius:9999px;transition:.2s}
    .nav-button:hover{background:#1565c0}
    .toggle-switch{position:relative;display:inline-block;width:44px;height:24px}
    .toggle-switch input{opacity:0;width:0;height:0}
    .toggle-slider{position:absolute;inset:0;cursor:pointer;background:#4a5568;transition:.4s;border-radius:24px}
    .toggle-slider:before{content:"";position:absolute;height:20px;width:20px;left:2px;bottom:2px;background:#fff;transition:.4s;border-radius:50%}
    input:checked + .toggle-slider{background:#4c51bf}
    input:checked + .toggle-slider:before{transform:translateX(20px)}
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;justify-content:center;align-items:center;z-index:1000}
    .modal-content{background:#fff;padding:2rem;border-radius:.75rem;text-align:center;width:90%;max-width:420px}
    .modal-bell-icon{width:64px;height:64px;margin:0 auto 1rem;border:2px solid #e5e7eb;border-radius:50%;display:flex;justify-content:center;align-items:center}
    .badge{font-size:.75rem;padding:.125rem .5rem;border-radius:.5rem}
    .mini-progress{height:8px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .mini-progress>span{display:block;height:100%;background:#1470F9;width:0%}
    .quiz-card label:hover{background:#f3f4f6}
  </style>
</head>
<body class="flex min-h-screen">

  <!-- Sidebar -->
  <aside class="w-64 text-white flex flex-col p-4 shadow-lg fixed h-full" style="background-color:#1470F9;">
    <div class="flex-grow">
      <h1 class="text-2xl font-bold mb-8">
        <a href="#" class="text-white hover:text-indigo-200 transition duration-300">Lorem Ipsum</a>
      </h1>
      <nav>
        <ul class="space-y-2">
          <li>
            <a href="index.html" class="flex items-center p-3 rounded-lg hover:bg-white hover:text-blue-600 transition-colors duration-200">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8v8m-4-4v4m-4-4v4m-2-12h10a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"/></svg>
              Dashboard
            </a>
          </li>
          <li>
            <a href="profilgayabelajar.html" class="flex items-center p-3 rounded-lg hover:bg-white hover:text-blue-600 transition-colors duration-200">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>
              Profil Gaya Belajar
            </a>
          </li>
          <li>
            <a href="rekomendasipembelajaran.html" class="flex items-center p-3 rounded-lg hover:bg-white hover:text-blue-600 transition-colors duration-200">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.435 9.177 5 7.5 5S4.168 5.435 3 6.253v13C4.168 18.435 5.823 18 7.5 18s3.332.435 4.5 1.253m0-13C13.168 5.435 14.823 5 16.5 5S19.832 5.435 21 6.253v13C19.832 18.435 18.177 18 16.5 18s-3.332.435-4.5 1.253"/></svg>
              Rekomendasi Pembelajaran
            </a>
          </li>
          <li>
            <a href="materi-pembelajaran.html" class="flex items-center p-3 rounded-lg hover:bg-white hover:text-blue-600 transition-colors duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15.5 2H8.6c-.6 0-1.1.2-1.4.6-.3.4-.6.9-.6 1.4V20c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V7.5L15.5 2Z"/><path d="M8 4v11c0 .6.4 1 1 1h10"/></svg>
              <span class="ml-3">Materi Pembelajaran</span>
            </a>
          </li>
          <li>
            <a href="riwayat-pembelajaran.html" class="flex items-center p-3 rounded-lg hover:bg-white hover:text-blue-600 transition-colors duration-200">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21H6.737a2 2 0 01-1.789-2.894l3.5-7A2 2 0 019.263 9h5.474a2 2 0 012 2v.894"/></svg>
              Performa Akademik
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <div class="mt-auto pt-4 border-t border-indigo-700">
      <div class="flex items-center justify-between mb-4">
        <span class="text-sm font-medium">Lite Mode</span>
        <label class="toggle-switch">
          <input type="checkbox" id="lite-mode-toggle">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <a href="profile.html" class="p-3 rounded-lg flex items-center justify-start  text-white hover:bg-white hover:text-blue-600 transition-colors duration-200">
        <img src="https://placehold.co/40x40/94a3b8/ffffff?text=U" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
        <div class="flex-grow">
          <p class="font-medium">Culaccino_</p>
          <p class="text-sm">UX Designer</p>
        </div>
        <svg class="h-6 w-6 ml-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7"/></svg>
      </a>

      <button id="logoutButton" class="w-full p-3 mt-2 text-left rounded-lg bg-red-500 text-white transition-colors duration-200 flex items-center justify-center">
        <svg class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
        Keluar
      </button>
    </div>
  </aside>

  <!-- Main -->
  <main class="main-content flex-1 p-8 pl-72">
    <div class="bg-white p-8 rounded-xl shadow-lg">
      <h1 class="text-2xl font-bold text-gray-800 mb-2">Profil Performa Akademik</h1>
      <p class="text-gray-600 mb-4 text-sm">Jawab 10 pernyataan (Benar/Salah). Q1–Q5: Penalaran Logika • Q6–Q10: Konsep Dasar.</p>

      <!-- Nav Dots -->
      <div class="mb-5">
        <div id="qNav" class="flex flex-wrap gap-2"></div>
      </div>

      <!-- Quiz list (all questions rendered here) -->
      <section id="quiz" class="space-y-4"></section>

      <!-- Score mini card -->
      <div id="scoreCard" class="mt-6 p-4 rounded-xl border bg-gray-50 hidden">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-500">Skor Kamu (skala 1–10)</p>
            <div class="flex items-center gap-3">
              <span id="scoreText" class="text-2xl font-bold text-gray-900">0/10</span>
              <span id="scoreBadge" class="text-xs px-2 py-1 rounded bg-gray-100 text-gray-700">Level</span>
            </div>
          </div>
          <div class="w-48">
            <div class="mini-progress"><span id="scoreBar"></span></div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="mt-6 flex flex-wrap gap-3">
        <button id="submitQuiz" class="nav-button">Kumpulkan Jawaban</button>
        <button id="resetQuiz" class="px-5 py-3 rounded-3xl font-semibold bg-gray-200 hover:bg-gray-300">Reset</button>
      </div>
    </div>
  </main>

  <!-- Modal Finish -->
  <div id="notification-modal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-bell-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.964 3.785 1.517 5.455 1.31A23.847 23.847 0 0018 17.082"/></svg>
        </div>
        <h3 class="text-lg font-semibold mb-1">Kuesioner Selesai</h3>
        <p id="summary" class="text-gray-700 text-sm mb-3"></p>
        <div id="levelBadge" class="badge bg-gray-100 text-gray-700 inline-block">Level</div>
        <p class="text-gray-500 text-xs mt-3">Mengalihkan ke dashboard…</p>
    </div>
  </div>

  <!-- Modal Lite Mode -->
  <div id="lite-mode-modal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-bell-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.964 3.785 1.517 5.455 1.31A23.847 23.847 0 0018 17.082"/></svg>
      </div>
      <h3 class="text-lg font-semibold mb-2">Lite Mode Sudah Diaktifkan</h3>
      <p class="text-gray-600 text-sm">Silahkan akses kembali materi tersebut</p>
    </div>
  </div>

  <script>
    // ===== Data Soal -> jadi quiz Benar/Salah (radio) =====
    const items = [
      { text: "1. Saya dapat memahami dan menyelesaikan soal logika berpola (pattern logic) seperti deret angka atau simbol.", key: true,  group: "PL" },
      { text: "2. Saya mampu memecahkan masalah algoritmik sederhana seperti menemukan pola urutan dalam teka-teki logika.", key: true,  group: "PL" },
      { text: "3. Saya dapat membuat keputusan logis berdasarkan kondisi tertentu (if-then-else).",                        key: true,  group: "PL" },
      { text: "4. Saya terbiasa menyelesaikan persoalan logika seperti puzzle, Sudoku, atau permainan strategi.",        key: true,  group: "PL" },
      { text: "5. Saya bisa memetakan suatu masalah ke dalam bentuk langkah-langkah logis (algoritmik).",                key: true,  group: "PL" },
      { text: "6. Saya memahami konsep variabel, tipe data, dan operator dalam bahasa pemrograman.",                    key: true,  group: "KD" },
      { text: "7. Saya dapat membuat program sederhana menggunakan perulangan dan percabangan.",                        key: true,  group: "KD" },
      { text: "8. Saya mengerti perbedaan antara array dan list, serta dapat menggunakannya sesuai kebutuhan.",         key: true,  group: "KD" },
      { text: "9. Saya memahami konsep fungsi/subprogram dan cara penggunaannya dalam pemrograman.",                    key: true,  group: "KD" },
      { text: "10. Saya dapat menulis pseudocode atau flowchart dari suatu masalah sederhana.",                         key: true,  group: "KD" }
    ];

    // ===== Elements =====
    const qNav = document.getElementById('qNav');
    const quizEl = document.getElementById('quiz');
    const submitBtn = document.getElementById('submitQuiz');
    const resetBtn  = document.getElementById('resetQuiz');
    const scoreCard = document.getElementById('scoreCard');
    const scoreText = document.getElementById('scoreText');
    const scoreBar  = document.getElementById('scoreBar');
    const scoreBadge= document.getElementById('scoreBadge');

    // Build nav dots (indikator benar/salah setelah submit)
    for (let i = 0; i < items.length; i++) {
      const dot = document.createElement('div');
      dot.className = 'question-nav-item';
      dot.textContent = i + 1;
      qNav.appendChild(dot);
    }
    const navDots = [...document.querySelectorAll('.question-nav-item')];

    function scoreLevel(total){
      if (total <= 2) return {label:'Beginner', cls:'bg-red-100 text-red-700'};
      if (total <= 4) return {label:'Basic', cls:'bg-orange-100 text-orange-700'};
      if (total <= 7) return {label:'Intermediate', cls:'bg-yellow-100 text-yellow-700'};
      return {label:'Advanced', cls:'bg-green-100 text-green-700'};
    }

    function renderQuiz(){
      quizEl.innerHTML = '';
      items.forEach((it, i)=>{
        const card = document.createElement('div');
        card.className = 'quiz-card bg-white rounded-xl border p-4';
        card.innerHTML = `
          <div class="flex items-start justify-between">
            <p class="font-semibold text-gray-800">${it.text}</p>
            <span id="mark-${i}" class="hidden ml-3 shrink-0 text-sm"></span>
          </div>
          <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2">
            <label class="flex items-center gap-3 p-2 rounded cursor-pointer">
              <input type="radio" name="q-${i}" value="true" class="h-4 w-4">
              <span>Benar</span>
            </label>
            <label class="flex items-center gap-3 p-2 rounded cursor-pointer">
              <input type="radio" name="q-${i}" value="false" class="h-4 w-4">
              <span>Salah</span>
            </label>
          </div>
        `;
        quizEl.appendChild(card);
      });
      scoreCard.classList.add('hidden');
      // reset nav colors
      navDots.forEach(d=>d.classList.remove('correct','wrong'));
    }

    function evaluate(){
      let totalCorrect = 0;
      let pl = 0, kd = 0;

      items.forEach((it, i)=>{
        const sel = document.querySelector(`input[name="q-${i}"]:checked`);
        const mark = document.getElementById(`mark-${i}`);
        mark.classList.remove('hidden');

        const got = sel ? (sel.value === 'true') : null;
        const isCorrect = (got === it.key);

        if (isCorrect) {
          totalCorrect++;
          if (it.group === 'PL') pl++; else kd++;
          mark.className = 'ml-3 text-green-600 text-sm';
          mark.innerHTML = '✅ Benar';
          navDots[i].classList.add('correct');
          navDots[i].classList.remove('wrong');
        } else {
          mark.className = 'ml-3 text-red-600 text-sm';
          mark.innerHTML = '❌ Salah';
          navDots[i].classList.add('wrong');
          navDots[i].classList.remove('correct');
        }
      });

      // Skala 1–10
      const score10 = Math.max(1, Math.round((totalCorrect / items.length) * 10));
      const lvl = scoreLevel(score10);

      // Mini score card
      scoreText.textContent = `${score10}/10`;
      scoreBar.style.width  = `${(score10/10)*100}%`;
      scoreBadge.textContent = lvl.label;
      scoreBadge.className = `text-xs px-2 py-1 rounded ${lvl.cls}`;
      scoreCard.classList.remove('hidden');

      // Simpan + modal ringkasan seperti versi sebelumnya
      try{
        localStorage.setItem('qa_pl_score', String(pl));
        localStorage.setItem('qa_kd_score', String(kd));
        localStorage.setItem('qa_total_score', String(totalCorrect));
        localStorage.setItem('qa_level', lvl.label);
      }catch{}

      const modal = document.getElementById('notification-modal');
      const summary = document.getElementById('summary');
      const badge = document.getElementById('levelBadge');
      summary.innerHTML = `Skor Penalaran Logika: <b>${pl}/5</b><br>Skor Konsep Dasar: <b>${kd}/5</b><br>Total Benar: <b>${totalCorrect}/10</b>`;
      badge.textContent = lvl.label; badge.className = `badge ${lvl.cls}`;
      modal.style.display = 'flex';
      setTimeout(()=>{ window.location.href='indexhasil.html'; }, 2500);
    }

    function resetQuiz(){
      renderQuiz();
      document.querySelectorAll('input[type="radio"]').forEach(r=>r.checked=false);
    }

    // Lite mode demo
    const liteModeToggle = document.getElementById('lite-mode-toggle');
    const liteModeModal = document.getElementById('lite-mode-modal');
    if (liteModeToggle) {
      liteModeToggle.addEventListener('change', ()=>{
        if (liteModeToggle.checked) {
          liteModeModal.style.display = 'flex';
          setTimeout(()=>{ liteModeModal.style.display = 'none'; }, 3000);
        }
      });
    }

    // Logout demo
    const logoutButton = document.getElementById('logoutButton');
    if (logoutButton) {
      logoutButton.addEventListener('click', function(){
        // (opsional: tampilkan modal logout seperti versi sebelumnya)
        window.location.href='login.html';
      });
    }

    // Events
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter') { submitBtn.click(); }
    });
    submitBtn.addEventListener('click', evaluate);
    resetBtn.addEventListener('click', resetQuiz);

    // Init
    renderQuiz();
  </script>
</body>
</html>
